<f:layout name="Frontend" />
<f:section name="content">

    <f:if condition="{session}">
        <div class="session">
            <div class="session-title">
                <h1>{session.topic}</h1>
            </div>
            <div class="session-description">
                <f:format.html>{session.description}</f:format.html>
            </div>
            <div class="session-meta">
                <p>
                    <span class="session-meta-item session-meta-type">
                        <f:if condition="{session.type} == 1">{f:translate(key: 'type-talk')}</f:if>
                        <f:if condition="{session.type} == 2">{f:translate(key: 'type-tutorial')}</f:if>
                        <f:if condition="{session.type} == 3">{f:translate(key: 'type-workshop')}</f:if>
                        <f:if condition="{session.type} == 4">{f:translate(key: 'type-other')}</f:if>
                        <f:if condition="{session.type} == 5">{f:translate(key: 'type-break')}</f:if>
                        <f:if condition="{session.type} == 6">{f:translate(key: 'type-wish')}</f:if>
                    </span>
                    -
                    <span class="session-meta-item session-meta-level">
                        <f:if condition="{session.level} == 1">{f:translate(key: 'level-starter')}</f:if>
                        <f:if condition="{session.level} == 2">{f:translate(key: 'level-advanced')}</f:if>
                        <f:if condition="{session.level} == 3">{f:translate(key: 'level-pro')}</f:if>
                    </span>
                </p>
            </div>
            <f:if condition="{session.speaker}">
                <f:then>
                    <div class="session-speaker">
                        <p>
                            <f:render section="speakerLinkWrap" contentAs="content" arguments="{settings: settings, speaker: session.speaker}">
                                <span class="session-speaker-item session-speaker-name">{session.speaker.name}</span>
                            </f:render>

                            <f:if condition="{session.twitter}">
                                <span class="session-speaker-item session-speaker-twitter">
                                    <a href="https://www.twitter.com/{session.twitter}" title="@{session.twitter}" target="_blank">@{session.twitter}</a>
                                </span>
                            </f:if>
                        </p>
                    </div>
                </f:then>
                <f:else>
                    <f:if condition="{session.speakerFree}">
                        <div class="session-speaker">
                            <p>
                                <span class="session-speaker-item session-speaker-name">{session.speakerFree}</span>
                            </p>
                        </div>
                    </f:if>
                </f:else>
            </f:if>
            <f:if condition="{session.documents}">
                <div class="session-files">
                    <h4>{f:translate(key: 'documents')}</h4>
                    <table>
                        <tbody>
                            <f:for each="{session.documents}" as="document">
                                <tr>
                                    <td><a href="{document.publicUrl}"><i class="icon-doc"></i> {document.name}</a></td>
                                </tr>
                            </f:for>
                        </tbody>
                    </table>
                </div>
            </f:if>
        </div>
        <div class="session-backlink">
            <div class="medium primary btn">
                <f:link.action action="list">{f:translate(key: 'back-to-overview')}</f:link.action>
            </div>
        </div>
        <div class="session-social">
            <div class="session-social-item">
                <div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="true"></div>
            </div>
            <div class="session-social-item">
                <f:if condition="{session.twitter}">
                    <f:then>
                        <a href="https://twitter.com/share" class="twitter-share-button" data-via="{session.twitter}" data-hashtags="{settings.twitter.hashtag}">{f:translate(key: 'tweet')}</a>
                    </f:then>
                    <f:else>
                        <a href="https://twitter.com/share" class="twitter-share-button" data-via="{settings.twitter.account}" data-hashtags="{settings.twitter.hashtag}">{f:translate(key: 'tweet')}</a>
                    </f:else>
                </f:if>
            </div>
        </div>
        <f:if condition="{settings.disqusShortname}">
            <div class="session-comments-disqus">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    var disqus_shortname = '{settings.disqusShortname}';
                    (function () {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </f:if>
    </f:if>

</f:section>


<f:section name="speakerLinkWrap">
    <f:if condition="{speaker.detailPage}">
        <f:then>
            <f:link.page title="{speaker.name}" pageUid="{speaker.detailPage}">
                {content -> f:format.raw()}
            </f:link.page>
        </f:then>
        <f:else>
            <f:if condition="{settings.speakerSinglePid}">
                <f:then>
                    <f:variable name="detailPid" value="{settings.speakerSinglePid}" />
                </f:then>
                <f:else>
                    <f:variable name="detailPid" value="" />
                </f:else>
            </f:if>

            <f:link.action controller="Speaker" action="show" arguments="{speaker:speaker}" title="{speaker.name}" pageUid="{detailPid}">
                {content -> f:format.raw()}
            </f:link.action>
        </f:else>
    </f:if>
</f:section>
